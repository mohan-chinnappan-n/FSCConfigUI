<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Fetch Test in Aura</title>
</head>
<body>

<h3>Example to show how to wrap a API callout (in case of localhost serving situations) in javascript as a function to be called in the aura controller methods</h3>
<textarea rows='3' cols='30' id='bal'></textarea>   
<script>


// the function to be in the bal.js  
window.getBal = async (id, bal) => {
  // url may be a localhost server
  const url = `https://mohansun-rum.herokuapp.com/bal/${id}/${bal}`; 
  let response = await fetch(url);
  return await response.json()
}


const id = 100;
const bal = 300;
getBal(id,bal).then (data => {
    document.getElementById('bal').value = JSON.stringify(data);
    console.log(data);
}).catch(e => console.log(e));


/* --------------------------- STEPS ----------

- add this lib.js into static resources (say bal)
- add this url to 
    - CSP 
    - remote site settings

- In the component have script require tag:

<ltng:require scripts="{!$Resource.bal}" afterScriptsLoaded="{!c.afterScriptsLoaded}" />

- In the component controller:

{{

 afterScriptsLoaded: function(cmp, event, helper) {
   window.getBal(100,200).then (data => {
   console.log(data);
   // do things with 'data' 
 }


}}

----------------------------------------------
*/
</script> 
</body>
</html>
